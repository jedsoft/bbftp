.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "BBFTPD 1"
.TH BBFTPD 1 "2013-02-07" "perl v5.10.0" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
bbftpd \- BBFTP protocol server
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBbbftpd\fR \fB\-v\fR
.PP
\&\fBbbftpd\fR \fB\-s\fR [\fB\-f\fR] [\fB\-e\fR EphemeralPortsRange] [\fB\-l\fR LogLevel] [\fB\-m\fR MaxStreamNumber] [\fB\-w\fR PortNumber] [\fB\-R\fR ProfileFile]
.PP
\&\fBbbftpd\fR \fB\-b\fR [\fB\-f\fR] [\fB\-e\fR EphemeralPortsRange] [\fB\-l\fR LogLevel] [\fB\-m\fR MaxStreamNumber] [\fB\-w\fR PortNumber] [\fB\-R\fR ProfileFile] [\fB\-u\fR] [\fB\-c\fR|\fB\-p\fR]
.PP
\&\fBbbftpd\fR [\fB\-f\fR] [\fB\-e\fR EphemeralPortsRange] [\fB\-l\fR LogLevel] [\fB\-m\fR MaxStreamNumber] [\fB\-w\fR PortNumber] [\fB\-R\fR ProfileFile] [\fB\-u\fR] [\fB\-c\fR|\fB\-p\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
bbftpd is a server that supports the \s-1BBFTP\s0 protocol. This protocol has been
developed in order to speed up transfer by using multiple \s-1TCP\s0 streams between
client and server, and also to take advantage of the \fB\s-1RFC\s0 1323\fR.
.PP
As one of the major problems of the \s-1FTP\s0 protocol was the unencrypted transmission
of the username and password, \s-1BBFTP\s0 uses several methods for authentication.
The first one is to generate at each new connection a \s-1RSA\s0 key pair, to send
the public key to the client who will encrypt the username and password using 
this public key, and then to decrypt them with the private key. As these keys
are 1024 bits long and generated at each new connection, it will be quite 
difficult to steal a password. This method requires OpenSSL to be installed
on both sides. The second connection method is based on ssh; instead
of making a connection to a running daemon, the client will remotely start the
daemon with ssh (with a command like ssh \-l user remotehost \*(L"bbftpd \-s\*(R").
A third additionnal authenticate mode allows to use certificates to log on. This mode
is based on the Grid Security Infrastructure and requires Globus software to be installed.
The client side needs a certificate to identify itself and the daemon needs a host certificate
.PP
\&\s-1BBFTP\s0 protocol works in the following way :
.PP
\&\fB\-\fR After the authentication procedure has ended there is what is called a control
connection between the client and the server. On that connection all control commands
will circulate.
.PP
\&\fB\-\fR When a data transfer occurs (get or put command sent by the client), the server can
work in passive or non-passive mode:
.PP
\&\- In passive mode (with client >= 3), the server gets all \s-1TCP\s0 ports needed by the transfer
(one per stream) and sends those ports to the client on the control connection. If the 
server is built or run with a range, those ports will be chosen in this range.
.PP
\&\- In non-passive mode, the client gets all \s-1TCP\s0 ports needed by the transfer 
(one per stream) and sends those port numbers to the server on the control connection. 
The server will then connect to those ports (using a defined port number if the 
\&\fB\-f\fR is not used) and use them to transfer data.
.PP
To meet security requirements (firewalls filters), you may want to use the passive mode with
a defined range of ephemeral ports.
.PP
The behaviour of the server is controlled by commands sent by the client (see \fIbbftp\fR\|(1)).
.PP
The server can be used in different ways :
.PP
Through inetd (and tcpwrapper if needed). In this case the line in the inetd.conf file will 
look like :
.PP
\&\fIbbftp stream tcp nowait root /usr/local/bin/bbftpd bbftpd [\-f] [\-e EphemeralPortsRange] [\-l LogLevel] [\-m MaxStreamNumber] [\-R ProfileFile] [\-u] [\-c|\-p]\fR
.PP
As a standalone server. In this case the starting procedure has to contain the following line:
.PP
\&\fIbbftpd \-b [\-f] [\-e EphemeralPortsRange] [\-l LogLevel] [\-m MaxStreamNumber] [\-w PortNumber] [\-u] [\-R ProfileFile] [\-u] [\-c|\-p]\fR
.PP
Started via ssh. In this case the remote command started by the client will look like:
.PP
\&\fIbbftpd \-s [\-f] [\-e EphemeralPortsRange] [\-l LogLevel] [\-m MaxStreamNumber] [\-w PortNumber] [\-R ProfileFile]\fR
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\-b" 4
.IX Item "-b"
Use this option to start bbftpd in background. In this case the server will bind and listen
on a control port which can be changed with the \fB\-w\fR option.
.IP "\-f" 4
.IX Item "-f"
The standard behaviour of the server is to bind the server-side port number on data
connection to controlport minus one. This is useful if the server is behind a firewall.
If you want the server to take the first free port number use this option.
.IP "\-e EphemeralPortsRange" 4
.IX Item "-e EphemeralPortsRange"
In passive mode (ie, requested by a client >= 3), the server can choose the ephemeral ports
for data connections in a range defined by this option. The syntax is: min:max.
Make sure to choose relevant values for min and max ports. If this option is not set, the
server will choose the port number in the default range which depends on the system.
.IP "\-l LogLevel" 4
.IX Item "-l LogLevel"
Use this option to change the log level. By default the server will log nothing.
\&\fILoglevel\fR is a string (uppercase or lowercase) whose values are :
.RS 4
.IP "\s-1EMERGENCY\s0" 4
.IX Item "EMERGENCY"
.PD 0
.IP "\s-1ALERT\s0" 4
.IX Item "ALERT"
.IP "\s-1CRITICAL\s0" 4
.IX Item "CRITICAL"
.IP "\s-1ERROR\s0" 4
.IX Item "ERROR"
.IP "\s-1WARNING\s0" 4
.IX Item "WARNING"
.IP "\s-1NOTICE\s0" 4
.IX Item "NOTICE"
.IP "\s-1INFORMATION\s0" 4
.IX Item "INFORMATION"
.IP "\s-1DEBUG\s0" 4
.IX Item "DEBUG"
.RE
.RS 4
.PD
.Sp
\&\fB\s-1WARNING\s0 :\fR
.Sp
This option has to be the last one when used in conjunction with option
\&\fB\-s\fR for backward compatibility.
.RE
.IP "\-m MaxStreamNumber" 4
.IX Item "-m MaxStreamNumber"
For each stream the server forks a child. If you want to limit or increase the number of streams
use this option.
.IP "\-R ProfileFile" 4
.IX Item "-R ProfileFile"
At start, the daemon tries to execute commands located in the 
\&\fB\f(CB$HOME\fB/.bbftprc\fR file. The location of this file can be changed with this option. See 
\&\fB\s-1CONTROL\s0 \s-1COMMANDS\s0\fR
to know the list of control commands
.IP "\-s" 4
.IX Item "-s"
Use this option when the server is started remotely via an ssh connection.
.IP "\-v" 4
.IX Item "-v"
Use this option to write the version of the software and default values to standard output.
.IP "\-w  PortNumber" 4
.IX Item "-w  PortNumber"
Use this option to change the control port number.
.IP "\-u" 4
.IX Item "-u"
This option allows the daemon to accept non-encrypted username/password messages from a client.
.IP "\-c | \-p" 4
.IX Item "-c | -p"
When compiled with certificates authentication module, these options allow to restrict the way
client can authenticate. \-c accepts certificates only, whereas \-p accepts user/password only.
If theses options are not used, both methods are accepted.
If \-c is used, the option \-u is meaningless and ignored.
.SH "CONTROL COMMANDS"
.IX Header "CONTROL COMMANDS"
The control commands are contained by an \s-1ASCII\s0 file (file specified by the \fB\-R\fR option
or ~/.bbftpdrc or /etc/bbftpd.conf).
.ie n .IP "\fBsetackto ""Acknowledge time-out""\fR" 4
.el .IP "\fBsetackto ``Acknowledge time-out''\fR" 4
.IX Item "setackto Acknowledge time-out"
Set time-out (in seconds) to wait for an acknowledge. Default value is 100
.ie n .IP "\fBsetrecvcontrolto ""Input control time-out""\fR" 4
.el .IP "\fBsetrecvcontrolto ``Input control time-out''\fR" 4
.IX Item "setrecvcontrolto Input control time-out"
Set time-out (in seconds) to wait while reading on the control socket. Default value is 180
.ie n .IP "\fBsetsendcontrolto ""Output control time-out""\fR" 4
.el .IP "\fBsetsendcontrolto ``Output control time-out''\fR" 4
.IX Item "setsendcontrolto Output control time-out"
Set time-out (in seconds) to wait while writing on the control socket. Default value is 180
.ie n .IP "\fBsetdatato ""Data time-out""\fR" 4
.el .IP "\fBsetdatato ``Data time-out''\fR" 4
.IX Item "setdatato Data time-out"
Set time-out (in seconds) to wait while reading on the data socket. Default value is 300
.IP "\fBsetoption [no]fixeddataport\fR" 4
.IX Item "setoption [no]fixeddataport"
Use a fixed port for listening while using \s-1SSH\s0 (ie standard port +1 = 5022). Otherwise, use
any available port (in range \-e if specified).
.SH "MESSAGES AND ERRORS"
.IX Header "MESSAGES AND ERRORS"
All informative messages and error messages are written to the syslog.
.SH "AUTHORS"
.IX Header "AUTHORS"
\&\fBbbftp\fR was developed by Gilles Farrache. 
It is now maintained by Lionel Schwarz and Pierre-Emmanuel Brinette at 
\&\fB \s-1IN2P3\s0 Computing Center\fR
, Villeurbanne (\s-1FRANCE\s0).
.SH "CONTRIBUTORS"
.IX Header "CONTRIBUTORS"
Tim Adye (Idea and implementation of ssh mode)
.PP
Gilles Gallot (Mutli-IP addresses support, secondary groups support, port on various systems and bug fixes)
.PP
Pierre-Emmanuel Brinette (Bug fix)
.PP
Andrew Goodney (Port to Darwin)
.PP
Paola Grosso (Idea and implementation of the \-q client option)
.PP
Petr Holub (Port to Windows cygwin)
.PP
Dan Schrager (Idea and implementation of the \-D client option)
.PP
Rod Walker & Kostas Georgiou (Idea and implementation of the \-g client option)
.PP
Shuwei Ye (Bug fix)
.SH "BUGS"
.IX Header "BUGS"
Send bugs / comments to bbftp@in2p3.fr
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIbbftp\fR\|(1).
.SH "POD ERRORS"
.IX Header "POD ERRORS"
Hey! \fBThe above document had some coding errors, which are explained below:\fR
.IP "Around line 1:" 4
.IX Item "Around line 1:"
=cut found outside a pod block.  Skipping to next block.
